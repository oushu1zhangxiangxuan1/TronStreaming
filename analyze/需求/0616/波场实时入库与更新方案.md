## 场景:
- 两种表: 
    - 一种需要实时/准实时插入(或copy)数据
    - 一种需要实时更新数据
- 这两种表数据量都比较大
- 都需要高效查询

## 问题
1. 这两种表使用内表还是外表
2. 使用什么表格式
3. 如何实时插入和更新
4. 如何同时保证查询的性能
5. magma与orc的查询速度区别
6. 是否可用分区和索引提高查询速度

## 其它
1. 外表和内表的区别
2. 内外表和表格式的关系
3. 是否所有格式都可以内外表
4. 内外表、表格式与是否能插入、更新、删除的关系
5. 内外表、表格式与查询速度的关系

## Res
1. 外表和内表的区别：对于内表，系统既管理数据，也管理schema信息；删除外表，只会删除schema信息，数据仍保留；删除内表,数据会一起删除；
2. 内外表和表格式的关系：内外表和表格式不冲突，parquet和row表没外表，ORC有内外表；
3. 是否所有格式都可以内外表：只有orc格式同时支持内外表，text/csv只支持外表，parquet/row/heap/magma只支持内表；
4. 内外表、表格式与是否能插入、更新、删除的关系：内表只有orc/magma/heap是支持更新和删除，其他内表（parquet/row）只能insert和truncate，外表csv/text不支持删改；
5. 内外表、表格式与查询速度的关系：orc内表查询最快，orc外表查询速度和orc内表相同，如果外表文件分布不均衡，可能会比内表慢；

## 方案
### 方案一
1. 需要更新的表用magma
2. 需要插入的表用orc
3. 直接JDBC进行插入与更新
### 方案二
1. 需要更新的表用magma，实时更新
2. 需要插入的表用orc，写csv文件放入临时外表，每隔一段时间将数据合入orc表


# ETH实时入库方案
